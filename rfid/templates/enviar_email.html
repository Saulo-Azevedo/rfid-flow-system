{% extends "base.html" %}
{% load static %}

{% block content %}

<style>

.page-title {
    font-size: 28px;
    font-weight: 700;
    color: #FFFFFF;
}

.card-rfid {
    background: rgba(20, 20, 20, 0.55); /* consistente com dashboard */
    border-radius: 14px;
    padding: 25px;
    backdrop-filter: blur(6px);
    box-shadow: 0 4px 15px rgba(0,0,0,0.35);
}

.btn-back {
    border: 2px solid #00D4FF;
    color: #00D4FF;
    padding: 8px 15px;
    border-radius: 10px;
}

.btn-back:hover {
    background: rgba(0, 212, 255, 0.1);
}

.form-label {
    color: #ffffff;
    font-weight: 600;
}

.form-control {
    background: #111111;
    color: white;
    border: 1px solid #2b2b2b;
}

.form-control:focus {
    background: #111111;
    color: white;
    border-color: #00D4FF;
    box-shadow: 0 0 0 0.15rem rgba(0, 212, 255, 0.25);
}

.btn-send {
    background: linear-gradient(90deg, #00D4FF, #00FFA6);
    border: none;
    padding: 12px;
    border-radius: 10px;
    color: #000;
    font-weight: 600;
    transition: 0.2s;
}

.btn-send:hover {
    opacity: 0.9;
    transform: translateY(-2px);
}

.notice {
    color: #d4d4d4;
    font-size: 14px;
}

</style>

<div class="container">

    <!-- VOLTAR -->
    <a href="{% url 'relatorios' %}" class="btn-back mb-4 d-inline-flex align-items-center">
        <i class="bi bi-arrow-left me-2"></i> Voltar
    </a>

    <h2 class="page-title mb-4">Enviar Relat칩rio por E-mail</h2>

    <div class="card-rfid">

        <p class="notice mb-4">
            O sistema enviar치 um arquivo Excel contendo os dados conforme os filtros selecionados em Relat칩rios.
        </p>

        {% if filtro_resumo %}
        <div class="alert alert-info">
            <strong>Filtros aplicados:</strong> {{ filtro_resumo }}
        </div>
        {% endif %}

        <form method="POST" class="row g-3">
            {% csrf_token %}
            <input type="hidden" name="tipo" value="{{ tipo_selected }}">
            <input type="hidden" name="status" value="{{ status_selected }}">
            <input type="hidden" name="data_tipo" value="{{ data_tipo|default:'cadastro' }}">
            <input type="hidden" name="data_inicio" value="{{ data_inicio }}">
            <input type="hidden" name="data_fim" value="{{ data_fim }}">

            <div class="col-md-8">
                <label class="form-label">E-mail do destinat치rio</label>
                <input type="email" name="destinatario" class="form-control"
                       placeholder="exemplo@empresa.com" required 
                       value="{{ destinatario_value|default:'' }}">
            </div>

            <div class="col-md-4 d-flex align-items-end">
                <button type="submit" class="btn-send w-100">
                    <i class="bi bi-send-fill"></i> Enviar
                </button>
            </div>
        </form>

    </div>

</div>

{% endblock %}
