{% extends "base.html" %}

{% block content %}
<div class="container mt-5">

    <div class="card bg-dark text-light shadow p-4">

        <h2 class="mb-4">‚úî Importa√ß√£o Conclu√≠da</h2>

        {% if erro %}
            <div class="alert alert-danger fs-5">
                {{ erro }}
            </div>

            <a href="/upload-xls/" class="btn btn-secondary btn-lg px-4 mt-4">
                ‚¨Ö Voltar
            </a>

        {% else %}

            <p class="fs-5">
                <strong>Total de leituras importadas:</strong>
                <span class="text-info">{{ qtd }}</span>
            </p>

            <p class="fs-5">
                <strong>Novos botij√µes criados:</strong>
                <span class="text-success">{{ novos_botijoes }}</span>
            </p>

            {% if erros %}
                <hr class="border-secondary my-4">

                <h3 class="text-danger mb-3">‚ö† Erros encontrados durante a importa√ß√£o</h3>

                <p>Algumas linhas n√£o puderam ser processadas. Veja abaixo:</p>

                <table class="table table-dark table-striped table-bordered mt-3">
                    <thead>
                        <tr>
                            <th>Linha</th>
                            <th>EPC</th>
                            <th>Mensagem do Erro</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for e in erros %}
                        <tr>
                            <td>{{ e.linha }}</td>
                            <td>{{ e.epc }}</td>
                            <td class="text-warning">{{ e.erro }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>

            {% else %}

                <div class="alert alert-success fs-5 mt-4">
                    ‚úî Nenhum erro encontrado na importa√ß√£o.
                </div>

            {% endif %}

            <!-- Bot√µes grandes, alinhados e com mais destaque -->
            <div class="d-flex gap-3 mt-4">

                <a href="/upload-xls/" class="btn btn-primary btn-lg px-4">
                    üîÑ Nova Importa√ß√£o
                </a>

                <a href="{% url 'dashboard' %}" class="btn btn-info btn-lg px-4">
                    üè† Voltar ao Dashboard
                </a>

            </div>

        {% endif %}

    </div>
</div>
{% endblock %}
